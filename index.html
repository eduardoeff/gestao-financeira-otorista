<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Gest√£o Financeira Inteligente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js para gr√°ficos -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100">
  <div id="root" class="min-h-screen flex items-center justify-center">
    <div class="text-center text-gray-600">
      Carregando aplica√ß√£o...
    </div>
  </div>

  <!-- Firebase SDK (vers√£o compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <!-- React, ReactDOM e Babel -->
  <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- C√≥digo da aplica√ß√£o -->
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // Configura√ß√£o Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBjvoL-4ea23mDnuH6Cq65yXtWkKvj9EEU",
      authDomain: "gestao-motorista-4155f.firebaseapp.com",
      projectId: "gestao-motorista-4155f",
      storageBucket: "gestao-motorista-4155f.firebasestorage.app",
      messagingSenderId: "566057933394",
      appId: "1:566057933394:web:afafa56f71557758b11d8b"
    };

    // Inicializa Firebase (compat)
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }

    const auth = firebase.auth();
    const db = firebase.firestore();

    function App() {
      const [user, setUser] = useState(null);
      const [loading, setLoading] = useState(true);
      const [authMode, setAuthMode] = useState('login');
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');
      const [authError, setAuthError] = useState('');

      const [activeTab, setActiveTab] = useState('dashboard');
      const [rides, setRides] = useState([]);
      const [expenses, setExpenses] = useState([]);
      const [houseExpenses, setHouseExpenses] = useState([]);

      const [showRideModal, setShowRideModal] = useState(false);
      const [showExpenseModal, setShowExpenseModal] = useState(false);
      const [showHouseModal, setShowHouseModal] = useState(false);

      const chartRef = useRef(null);
      const chartInstance = useRef(null);

      const today = new Date().toISOString().split('T')[0];

      const [rideForm, setRideForm] = useState({
        date: today,
        app: 'Uber',
        value: ''
      });

      const [expenseForm, setExpenseForm] = useState({
        date: today,
        category: 'Combust√≠vel',
        description: '',
        value: ''
      });

      const [houseForm, setHouseForm] = useState({
        date: today,
        category: 'Alimenta√ß√£o',
        description: '',
        value: ''
      });

      // Monitorar autentica√ß√£o
      useEffect(() => {
        const unsubscribe = auth.onAuthStateChanged((currentUser) => {
          setUser(currentUser);
          setLoading(false);
        });
        return () => unsubscribe();
      }, []);

      // Carregar dados do Firestore em tempo real
      useEffect(() => {
        if (!user) return;

        const ridesQuery = db
          .collection('rides')
          .where('userId', '==', user.uid)
          .orderBy('date', 'desc');

        const unsubRides = ridesQuery.onSnapshot((snapshot) => {
          const data = snapshot.docs.map(doc => ({
            id: doc.id,
            ...doc.data(),
            value: parseFloat(doc.data().value) || 0
          }));
          setRides(data);
        });

        const expensesQuery = db
          .collection('expenses')
          .where('userId', '==', user.uid)
          .orderBy('date', 'desc');

        const unsubExpenses = expensesQuery.onSnapshot((snapshot) => {
          const data = snapshot.docs.map(doc => ({
            id: doc.id,
            ...doc.data(),
            value: parseFloat(doc.data().value) || 0
          }));
          setExpenses(data);
        });

        const houseQuery = db
          .collection('houseExpenses')
          .where('userId', '==', user.uid)
          .orderBy('date', 'desc');

        const unsubHouse = houseQuery.onSnapshot((snapshot) => {
          const data = snapshot.docs.map(doc => ({
            id: doc.id,
            ...doc.data(),
            value: parseFloat(doc.data().value) || 0
          }));
          setHouseExpenses(data);
        });

        return () => {
          unsubRides();
          unsubExpenses();
          unsubHouse();
        };
      }, [user]);

      const handleAuth = async (e) => {
        e.preventDefault();
        setAuthError('');
        try {
          if (authMode === 'login') {
            await auth.signInWithEmailAndPassword(email, password);
          } else {
            await auth.createUserWithEmailAndPassword(email, password);
          }
        } catch (error) {
          if (error.code === 'auth/email-already-in-use') {
            setAuthError('Este e-mail j√° est√° cadastrado');
          } else if (error.code === 'auth/weak-password') {
            setAuthError('A senha deve ter pelo menos 6 caracteres');
          } else if (error.code === 'auth/invalid-email') {
            setAuthError('E-mail inv√°lido');
          } else if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {
            setAuthError('E-mail ou senha incorretos');
          } else {
            setAuthError('Erro ao autenticar. Tente novamente.');
          }
        }
      };

      const handleLogout = async () => {
        await auth.signOut();
      };

      const addRide = async () => {
        if (!rideForm.value || !user) return;
        await db.collection('rides').add({
          ...rideForm,
          value: parseFloat(rideForm.value) || 0,
          userId: user.uid,
          createdAt: new Date().toISOString()
        });
        setRideForm({ date: today, app: 'Uber', value: '' });
        setShowRideModal(false);
      };

      const addExpense = async () => {
        if (!expenseForm.value || !user) return;
        await db.collection('expenses').add({
          ...expenseForm,
          value: parseFloat(expenseForm.value) || 0,
          userId: user.uid,
          createdAt: new Date().toISOString()
        });
        setExpenseForm({ date: today, category: 'Combust√≠vel', description: '', value: '' });
        setShowExpenseModal(false);
      };

      const addHouseExpense = async () => {
        if (!houseForm.value || !user) return;
        await db.collection('houseExpenses').add({
          ...houseForm,
          value: parseFloat(houseForm.value) || 0,
          userId: user.uid,
          createdAt: new Date().toISOString()
        });
        setHouseForm({ date: today, category: 'Alimenta√ß√£o', description: '', value: '' });
        setShowHouseModal(false);
      };

      const deleteRide = async (id) => {
        await db.collection('rides').doc(id).delete();
      };

      const deleteExpense = async (id) => {
        await db.collection('expenses').doc(id).delete();
      };

      const deleteHouseExpense = async (id) => {
        await db.collection('houseExpenses').doc(id).delete();
      };

      const safeSum = (arr) =>
        arr.reduce((sum, item) => sum + (isNaN(item.value) ? 0 : item.value), 0);

      const totalRides = safeSum(rides);
      const totalExpenses = safeSum(expenses);
      const totalHouseExpenses = safeSum(houseExpenses);
      const workProfit = totalRides - totalExpenses;
      const finalBalance = workProfit - totalHouseExpenses;

      // Novos indicadores de gest√£o
      const totalCorridas = rides.length;
      const ticketMedio = totalCorridas > 0 ? totalRides / totalCorridas : 0;
      const custoPorCorrida = totalCorridas > 0 ? totalExpenses / totalCorridas : 0;
      const margemLucro = totalRides > 0 ? (workProfit / totalRides) * 100 : 0;

      // Preparar dados para o gr√°fico (√∫ltimos 7 dias)
      const getLast7Days = () => {
        const days = [];
        for (let i = 6; i >= 0; i--) {
          const d = new Date();
          d.setDate(d.getDate() - i);
          days.push(d.toISOString().split('T')[0]);
        }
        return days;
      };

      const last7Days = getLast7Days();

      const chartData = last7Days.map(date => {
        const dayRides = rides.filter(r => r.date === date);
        const dayExpenses = expenses.filter(e => e.date === date);
        const receita = safeSum(dayRides);
        const despesa = safeSum(dayExpenses);
        const lucro = receita - despesa;
        return { date, receita, despesa, lucro };
      });

      // Proje√ß√µes baseadas nos √∫ltimos 7 dias
      const avgReceitaDiaria = chartData.reduce((sum, d) => sum + d.receita, 0) / 7;
      const avgDespesaDiaria = chartData.reduce((sum, d) => sum + d.despesa, 0) / 7;
      const avgLucroDiario = avgReceitaDiaria - avgDespesaDiaria;

      const diasRestantesMes = () => {
        const hoje = new Date();
        const ultimoDia = new Date(hoje.getFullYear(), hoje.getMonth() + 1, 0);
        return ultimoDia.getDate() - hoje.getDate();
      };

      const diasRestantes = diasRestantesMes();
      const projecaoReceita = totalRides + (avgReceitaDiaria * diasRestantes);
      const projecaoLucro = workProfit + (avgLucroDiario * diasRestantes);

      // Renderizar gr√°fico
      useEffect(() => {
        if (activeTab === 'dashboard' && chartRef.current && chartData.length > 0) {
          if (chartInstance.current) {
            chartInstance.current.destroy();
          }

          const ctx = chartRef.current.getContext('2d');
          chartInstance.current = new Chart(ctx, {
            type: 'line',
            data: {
              labels: last7Days.map(d => {
                const [y, m, day] = d.split('-');
                return `${day}/${m}`;
              }),
              datasets: [
                {
                  label: 'Receita',
                  data: chartData.map(d => d.receita),
                  borderColor: '#10b981',
                  backgroundColor: 'rgba(16, 185, 129, 0.1)',
                  tension: 0.3,
                  fill: true
                },
                {
                  label: 'Despesas',
                  data: chartData.map(d => d.despesa),
                  borderColor: '#f59e0b',
                  backgroundColor: 'rgba(245, 158, 11, 0.1)',
                  tension: 0.3,
                  fill: true
                },
                {
                  label: 'Lucro',
                  data: chartData.map(d => d.lucro),
                  borderColor: '#0ea5e9',
                  backgroundColor: 'rgba(14, 165, 233, 0.1)',
                  tension: 0.3,
                  fill: true
                }
              ]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  display: true,
                  position: 'bottom',
                  labels: {
                    boxWidth: 12,
                    font: { size: 11 }
                  }
                }
              },
              scales: {
                y: {
                  beginAtZero: true,
                  ticks: {
                    callback: function(value) {
                      return 'R$ ' + value.toFixed(0);
                    }
                  }
                }
              }
            }
          });
        }

        return () => {
          if (chartInstance.current) {
            chartInstance.current.destroy();
          }
        };
      }, [activeTab, chartData]);

      if (loading) {
        return (
          <div className="min-h-screen flex items-center justify-center">
            <div className="text-center">
              <div className="text-4xl mb-2">‚è≥</div>
              <div className="text-gray-600">Carregando...</div>
            </div>
          </div>
        );
      }

      if (!user) {
        return (
          <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-900 via-slate-800 to-sky-700">
            <div className="w-full max-w-md">
              <div className="flex flex-col items-center mb-6">
                <img
                  src="https://i.ibb.co/Y4Jpys2S/download.png"
                  alt="Gest√£o Financeira Inteligente"
                  className="w-64 h-64 rounded-2xl mb-4 shadow-xl object-cover"
                />
                <h1 className="text-2xl font-bold text-white">Gest√£o Financeira Inteligente</h1>
                <p className="text-sm text-slate-200 mt-1 text-center px-4">
                  Finan√ßas claras, decis√µes inteligentes.
                </p>
              </div>

              <div className="bg-white/95 backdrop-blur rounded-2xl shadow-xl p-6">
                <div className="flex gap-2 mb-4">
                  <button
                    onClick={() => setAuthMode('login')}
                    className={`flex-1 py-2 rounded-xl text-sm font-medium transition
                      ${authMode === 'login'
                        ? 'bg-sky-600 text-white shadow'
                        : 'bg-slate-100 text-slate-700 hover:bg-slate-200'}`}
                  >
                    Entrar
                  </button>
                  <button
                    onClick={() => setAuthMode('signup')}
                    className={`flex-1 py-2 rounded-xl text-sm font-medium transition
                      ${authMode === 'signup'
                        ? 'bg-sky-600 text-white shadow'
                        : 'bg-slate-100 text-slate-700 hover:bg-slate-200'}`}
                  >
                    Cadastrar
                  </button>
                </div>

                <form onSubmit={handleAuth} className="space-y-4">
                  <div>
                    <label className="block text-xs font-semibold mb-1 text-slate-700">
                      E-mail
                    </label>
                    <input
                      type="email"
                      value={email}
                      onChange={(e) => setEmail(e.target.value)}
                      className="w-full border border-slate-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                      placeholder="seu@email.com"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-xs font-semibold mb-1 text-slate-700">
                      Senha
                    </label>
                    <input
                      type="password"
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                      className="w-full border border-slate-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                      placeholder="m√≠nimo 6 caracteres"
                      required
                    />
                  </div>

                  {authError && (
                    <div className="bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-xs">
                      {authError}
                    </div>
                  )}

                  <button
                    type="submit"
                    className="w-full bg-sky-600 hover:bg-sky-700 text-white py-2.5 rounded-xl font-semibold text-sm shadow-md transition"
                  >
                    {authMode === 'login' ? 'Entrar' : 'Criar Conta'}
                  </button>
                </form>

                <p className="text-[11px] text-slate-400 text-center mt-4">
                  Seus dados de corridas e despesas ficam salvos na nuvem, por usu√°rio.
                </p>
              </div>
            </div>
          </div>
        );
      }

      const mobileCardClass = "bg-white rounded-lg shadow p-4 mb-3";

      return (
        <div className="min-h-screen flex flex-col bg-slate-50">
          <header className="bg-gradient-to-r from-slate-900 via-slate-800 to-sky-700 text-white p-4 shadow-lg">
            <div className="flex justify-between items-center max-w-xl mx-auto">
              <div>
                <h1 className="text-xl font-bold">üí∞ Gest√£o Financeira Inteligente</h1>
                <p className="text-xs text-slate-200">{user.email}</p>
              </div>
              <button
                onClick={handleLogout}
                className="bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg text-sm transition"
              >
                Sair
              </button>
            </div>
          </header>

          <nav className="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg flex justify-around py-2 text-xs sm:text-sm z-20">
            <button
              onClick={() => setActiveTab('dashboard')}
              className={`flex flex-col items-center px-3 py-1 ${activeTab === 'dashboard' ? 'text-sky-600 font-semibold' : 'text-gray-500'}`}
            >
              <span className="text-lg">üìä</span>
              <span>Dashboard</span>
            </button>
            <button
              onClick={() => setActiveTab('corridas')}
              className={`flex flex-col items-center px-3 py-1 ${activeTab === 'corridas' ? 'text-sky-600 font-semibold' : 'text-gray-500'}`}
            >
              <span className="text-lg">üöó</span>
              <span>Corridas</span>
            </button>
            <button
              onClick={() => setActiveTab('despesas-trabalho')}
              className={`flex flex-col items-center px-3 py-1 ${activeTab === 'despesas-trabalho' ? 'text-sky-600 font-semibold' : 'text-gray-500'}`}
            >
              <span className="text-lg">‚õΩ</span>
              <span>Trabalho</span>
            </button>
            <button
              onClick={() => setActiveTab('despesas-casa')}
              className={`flex flex-col items-center px-3 py-1 ${activeTab === 'despesas-casa' ? 'text-sky-600 font-semibold' : 'text-gray-500'}`}
            >
              <span className="text-lg">üè†</span>
              <span>Casa</span>
            </button>
          </nav>

          <main className="flex-1 p-3 pb-20 max-w-xl mx-auto w-full">
            {activeTab === 'dashboard' && (
              <div>
                {/* Cards principais */}
                <div className="grid grid-cols-2 gap-3 mb-4">
                  <div className="bg-gradient-to-br from-emerald-500 to-emerald-600 text-white rounded-xl p-4 shadow-lg">
                    <div className="text-xs opacity-90 font-medium">Receita Corridas</div>
                    <div className="text-2xl font-bold mt-1">R$ {totalRides.toFixed(2)}</div>
                    <div className="text-xs opacity-75 mt-1">{totalCorridas} corridas</div>
                  </div>
                  <div className="bg-gradient-to-br from-amber-500 to-amber-600 text-white rounded-xl p-4 shadow-lg">
                    <div className="text-xs opacity-90 font-medium">Despesas Trabalho</div>
                    <div className="text-2xl font-bold mt-1">R$ {totalExpenses.toFixed(2)}</div>
                  </div>
                  <div className="bg-gradient-to-br from-sky-500 to-sky-600 text-white rounded-xl p-4 shadow-lg">
                    <div className="text-xs opacity-90 font-medium">Lucro Trabalho</div>
                    <div className="text-2xl font-bold mt-1">R$ {workProfit.toFixed(2)}</div>
                  </div>
                  <div className="bg-gradient-to-br from-rose-500 to-rose-600 text-white rounded-xl p-4 shadow-lg">
                    <div className="text-xs opacity-90 font-medium">Despesas Casa</div>
                    <div className="text-2xl font-bold mt-1">R$ {totalHouseExpenses.toFixed(2)}</div>
                  </div>
                </div>

                {/* Saldo final */}
                <div className={`${finalBalance >= 0 ? 'bg-gradient-to-br from-teal-600 to-teal-700' : 'bg-gradient-to-br from-red-600 to-red-700'} text-white rounded-xl p-5 mb-4 shadow-lg`}>
                  <div className="text-sm opacity-90 font-medium">Saldo Final</div>
                  <div className="text-3xl font-bold mt-1">R$ {finalBalance.toFixed(2)}</div>
                </div>

                {/* Proje√ß√µes do m√™s */}
                <div className="bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-xl p-4 mb-4 shadow-lg">
                  <h3 className="text-sm font-bold mb-3 flex items-center">
                    <span className="mr-2">üîÆ</span>
                    Proje√ß√£o do M√™s (baseado em 7 dias)
                  </h3>
                  <div className="grid grid-cols-2 gap-3">
                    <div>
                      <div className="text-xs opacity-80">Receita Projetada</div>
                      <div className="text-xl font-bold">R$ {projecaoReceita.toFixed(2)}</div>
                    </div>
                    <div>
                      <div className="text-xs opacity-80">Lucro Projetado</div>
                      <div className="text-xl font-bold">R$ {projecaoLucro.toFixed(2)}</div>
                    </div>
                  </div>
                  <div className="text-xs opacity-75 mt-2">
                    Faltam {diasRestantes} dias para o fim do m√™s
                  </div>
                </div>

                {/* Gr√°fico de evolu√ß√£o */}
                <div className="bg-white rounded-xl shadow-lg p-4 mb-4">
                  <h3 className="text-sm font-bold text-slate-700 mb-3 flex items-center">
                    <span className="mr-2">üìà</span>
                    Evolu√ß√£o (√∫ltimos 7 dias)
                  </h3>
                  <div style={{ height: '220px' }}>
                    <canvas ref={chartRef}></canvas>
                  </div>
                </div>

                {/* Indicadores de efici√™ncia */}
                <div className="bg-white rounded-xl shadow-lg p-4 mb-4">
                  <h3 className="text-sm font-bold text-slate-700 mb-3 flex items-center">
                    <span className="mr-2">üìä</span>
                    Indicadores de Efici√™ncia
                  </h3>
                  <div className="grid grid-cols-3 gap-3">
                    <div className="bg-slate-50 rounded-lg p-3 text-center">
                      <div className="text-xs text-slate-500 mb-1">Ticket M√©dio</div>
                      <div className="text-lg font-bold text-emerald-600">
                        R$ {ticketMedio.toFixed(2)}
                      </div>
                    </div>
                    <div className="bg-slate-50 rounded-lg p-3 text-center">
                      <div className="text-xs text-slate-500 mb-1">Custo/Corrida</div>
                      <div className="text-lg font-bold text-amber-600">
                        R$ {custoPorCorrida.toFixed(2)}
                      </div>
                    </div>
                    <div className="bg-slate-50 rounded-lg p-3 text-center">
                      <div className="text-xs text-slate-500 mb-1">Margem</div>
                      <div className={`text-lg font-bold ${margemLucro >= 0 ? 'text-sky-600' : 'text-red-600'}`}>
                        {margemLucro.toFixed(1)}%
                      </div>
                    </div>
                  </div>
                </div>

                {/* Atividade recente */}
                <div className="bg-white rounded-xl shadow-lg p-4">
                  <h2 className="text-sm font-bold text-slate-700 mb-3 flex items-center">
                    <span className="mr-2">üìã</span>
                    Atividade Recente
                  </h2>
                  <div className="space-y-2 text-sm">
                    {[...rides.slice(0, 3).map(r => ({...r, type: 'ride'})),
                      ...expenses.slice(0, 3).map(e => ({...e, type: 'expense'})),
                      ...houseExpenses.slice(0, 3).map(h => ({...h, type: 'house'}))]
                      .sort((a, b) => new Date(b.date) - new Date(a.date))
                      .slice(0, 5)
                      .map((item, idx) => (
                        <div key={idx} className="flex justify-between items-center bg-slate-50 rounded-lg px-3 py-2.5">
                          <div>
                            <span className="font-semibold text-slate-700">
                              {item.type === 'ride' && 'üöó Corrida'}
                              {item.type === 'expense' && '‚õΩ Trabalho'}
                              {item.type === 'house' && 'üè† Casa'}
                            </span>
                            <span className="text-slate-400 text-xs ml-2">{item.date}</span>
                          </div>
                          <span className={`font-bold ${item.type === 'ride' ? 'text-emerald-600' : 'text-red-600'}`}>
                            {item.type === 'ride' ? '+' : '-'} R$ {item.value.toFixed(2)}
                          </span>
                        </div>
                      ))}
                    {rides.length === 0 && expenses.length === 0 && houseExpenses.length === 0 && (
                      <p className="text-center text-slate-400 py-6 text-xs">
                        Nenhuma atividade registrada ainda
                      </p>
                    )}
                  </div>
                </div>
              </div>
            )}

            {activeTab === 'corridas' && (
              <div>
                <div className="flex justify-between items-center mb-3">
                  <h2 className="text-lg font-bold text-slate-700">üöó Corridas</h2>
                  <button
                    onClick={() => setShowRideModal(true)}
                    className="bg-sky-600 hover:bg-sky-700 text-white text-sm px-4 py-2 rounded-lg shadow transition"
                  >
                    + Corrida
                  </button>
                </div>

                {rides.length === 0 && (
                  <p className="text-center text-slate-400 text-sm mt-6">
                    Nenhuma corrida registrada
                  </p>
                )}

                {rides.map(ride => (
                  <div key={ride.id} className={mobileCardClass}>
                    <div className="flex justify-between items-center mb-1">
                      <span className="font-semibold text-slate-700">{ride.app}</span>
                      <span className="text-xs text-slate-400">{ride.date}</span>
                    </div>
                    <div className="flex justify-between items-center mt-2">
                      <span className="font-bold text-emerald-600 text-lg">R$ {ride.value.toFixed(2)}</span>
                      <button
                        onClick={() => deleteRide(ride.id)}
                        className="text-xs text-red-600 hover:text-red-700 font-medium"
                      >
                        Excluir
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            )}

            {activeTab === 'despesas-trabalho' && (
              <div>
                <div className="flex justify-between items-center mb-3">
                  <h2 className="text-lg font-bold text-slate-700">‚õΩ Despesas Trabalho</h2>
                  <button
                    onClick={() => setShowExpenseModal(true)}
                    className="bg-amber-600 hover:bg-amber-700 text-white text-sm px-4 py-2 rounded-lg shadow transition"
                  >
                    + Despesa
                  </button>
                </div>

                {expenses.length === 0 && (
                  <p className="text-center text-slate-400 text-sm mt-6">
                    Nenhuma despesa registrada
                  </p>
                )}

                {expenses.map(expense => (
                  <div key={expense.id} className={mobileCardClass}>
                    <div className="flex justify-between items-center mb-1">
                      <span className="font-semibold text-slate-700">{expense.category}</span>
                      <span className="text-xs text-slate-400">{expense.date}</span>
                    </div>
                    {expense.description && (
                      <div className="text-sm text-slate-500 mb-2">
                        {expense.description}
                      </div>
                    )}
                    <div className="flex justify-between items-center">
                      <span className="font-bold text-red-600 text-lg">R$ {expense.value.toFixed(2)}</span>
                      <button
                        onClick={() => deleteExpense(expense.id)}
                        className="text-xs text-red-600 hover:text-red-700 font-medium"
                      >
                        Excluir
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            )}

            {activeTab === 'despesas-casa' && (
              <div>
                <div className="flex justify-between items-center mb-3">
                  <h2 className="text-lg font-bold text-slate-700">üè† Despesas Casa</h2>
                  <button
                    onClick={() => setShowHouseModal(true)}
                    className="bg-rose-600 hover:bg-rose-700 text-white text-sm px-4 py-2 rounded-lg shadow transition"
                  >
                    + Despesa
                  </button>
                </div>

                {houseExpenses.length === 0 && (
                  <p className="text-center text-slate-400 text-sm mt-6">
                    Nenhuma despesa registrada
                  </p>
                )}

                {houseExpenses.map(house => (
                  <div key={house.id} className={mobileCardClass}>
                    <div className="flex justify-between items-center mb-1">
                      <span className="font-semibold text-slate-700">{house.category}</span>
                      <span className="text-xs text-slate-400">{house.date}</span>
                    </div>
                    {house.description && (
                      <div className="text-sm text-slate-500 mb-2">
                        {house.description}
                      </div>
                    )}
                    <div className="flex justify-between items-center">
                      <span className="font-bold text-red-600 text-lg">R$ {house.value.toFixed(2)}</span>
                      <button
                        onClick={() => deleteHouseExpense(house.id)}
                        className="text-xs text-red-600 hover:text-red-700 font-medium"
                      >
                        Excluir
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            )}
          </main>

          {/* Modal: Nova Corrida */}
          {showRideModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-30">
              <div className="bg-white rounded-xl p-5 w-full max-w-sm shadow-2xl">
                <h3 className="text-lg font-bold mb-4 text-slate-700">üöó Nova Corrida</h3>
                <div className="space-y-3 text-sm">
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Data</label>
                    <input
                      type="date"
                      value={rideForm.date}
                      onChange={e => setRideForm({...rideForm, date: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                    />
                  </div>
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Aplicativo</label>
                    <select
                      value={rideForm.app}
                      onChange={e => setRideForm({...rideForm, app: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                    >
                      <option>Uber</option>
                      <option>99</option>
                      <option>InDriver</option>
                      <option>Outro</option>
                    </select>
                  </div>
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Valor (R$)</label>
                    <input
                      type="number"
                      step="0.01"
                      value={rideForm.value}
                      onChange={e => setRideForm({...rideForm, value: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-sky-500 focus:border-sky-500"
                      placeholder="0,00"
                    />
                  </div>
                </div>
                <div className="flex gap-2 mt-5">
                  <button
                    onClick={() => setShowRideModal(false)}
                    className="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 py-2.5 rounded-lg font-medium transition"
                  >
                    Cancelar
                  </button>
                  <button
                    onClick={addRide}
                    className="flex-1 bg-sky-600 hover:bg-sky-700 text-white py-2.5 rounded-lg font-medium transition"
                  >
                    Salvar
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Modal: Nova Despesa Trabalho */}
          {showExpenseModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-30">
              <div className="bg-white rounded-xl p-5 w-full max-w-sm shadow-2xl">
                <h3 className="text-lg font-bold mb-4 text-slate-700">‚õΩ Nova Despesa Trabalho</h3>
                <div className="space-y-3 text-sm">
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Data</label>
                    <input
                      type="date"
                      value={expenseForm.date}
                      onChange={e => setExpenseForm({...expenseForm, date: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500"
                    />
                  </div>
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Categoria</label>
                    <select
                      value={expenseForm.category}
                      onChange={e => setExpenseForm({...expenseForm, category: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500"
                    >
                      <option>Combust√≠vel</option>
                      <option>Manuten√ß√£o</option>
                      <option>Lavagem</option>
                      <option>Ped√°gio</option>
                      <option>Estacionamento</option>
                      <option>√Ågua/Lanche</option>
                      <option>Outro</option>
                    </select>
                  </div>
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Descri√ß√£o</label>
                    <input
                      type="text"
                      value={expenseForm.description}
                      onChange={e => setExpenseForm({...expenseForm, description: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500"
                      placeholder="Detalhes da despesa"
                    />
                  </div>
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Valor (R$)</label>
                    <input
                      type="number"
                      step="0.01"
                      value={expenseForm.value}
                      onChange={e => setExpenseForm({...expenseForm, value: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-amber-500 focus:border-amber-500"
                      placeholder="0,00"
                    />
                  </div>
                </div>
                <div className="flex gap-2 mt-5">
                  <button
                    onClick={() => setShowExpenseModal(false)}
                    className="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 py-2.5 rounded-lg font-medium transition"
                  >
                    Cancelar
                  </button>
                  <button
                    onClick={addExpense}
                    className="flex-1 bg-amber-600 hover:bg-amber-700 text-white py-2.5 rounded-lg font-medium transition"
                  >
                    Salvar
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Modal: Nova Despesa Casa */}
          {showHouseModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-30">
              <div className="bg-white rounded-xl p-5 w-full max-w-sm shadow-2xl">
                <h3 className="text-lg font-bold mb-4 text-slate-700">üè† Nova Despesa Casa</h3>
                <div className="space-y-3 text-sm">
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Data</label>
                    <input
                      type="date"
                      value={houseForm.date}
                      onChange={e => setHouseForm({...houseForm, date: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rose-500 focus:border-rose-500"
                    />
                  </div>
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Categoria</label>
                    <select
                      value={houseForm.category}
                      onChange={e => setHouseForm({...houseForm, category: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rose-500 focus:border-rose-500"
                    >
                      <option>Alimenta√ß√£o</option>
                      <option>Aluguel</option>
                      <option>√Ågua</option>
                      <option>Luz</option>
                      <option>Internet</option>
                      <option>G√°s</option>
                      <option>Telefone</option>
                      <option>Educa√ß√£o</option>
                      <option>Sa√∫de</option>
                      <option>Transporte</option>
                      <option>Lazer</option>
                      <option>Outro</option>
                    </select>
                  </div>
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Descri√ß√£o</label>
                    <input
                      type="text"
                      value={houseForm.description}
                      onChange={e => setHouseForm({...houseForm, description: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rose-500 focus:border-rose-500"
                      placeholder="Detalhes da despesa"
                    />
                  </div>
                  <div>
                    <label className="block mb-1 font-medium text-slate-600">Valor (R$)</label>
                    <input
                      type="number"
                      step="0.01"
                      value={houseForm.value}
                      onChange={e => setHouseForm({...houseForm, value: e.target.value})}
                      className="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-rose-500 focus:border-rose-500"
                      placeholder="0,00"
                    />
                  </div>
                </div>
                <div className="flex gap-2 mt-5">
                  <button
                    onClick={() => setHouseForm(false)}
                    className="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 py-2.5 rounded-lg font-medium transition"
                  >
                    Cancelar
                  </button>
                  <button
                    onClick={addHouseExpense}
                    className="flex-1 bg-rose-600 hover:bg-rose-700 text-white py-2.5 rounded-lg font-medium transition"
                  >
                    Salvar
                  </button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
